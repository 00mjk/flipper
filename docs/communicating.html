<html lang="en"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Device Communication · Flipper</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta property="og:title" content="Device Communication · Flipper"/><meta property="og:type" content="website"/><meta property="og:url" content="https://fbflipper.com//index.html"/><meta property="og:description" content="To start communicating with a client your plugin must implement the init function. Once this function has been called the active client can also be accessed via `this.client`. This `id` of the plugin in JavaScript must match the native plugin `id` to allow for them to communicate."/><link rel="shortcut icon" href="/img/icon.png"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><link rel="stylesheet" href="/css/main.css"/></head><body class="sideNavVisible doc separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/icon.png"/><h2 class="headerTitle">Flipper</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/docs/getting-started.html" target="_self">Getting Started</a></li><li class="siteNavGroupActive"><a href="/docs/understand.html" target="_self">Docs</a></li><li class=""><a href="https://github.com/facebook/flipper" target="_self">GitHub</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><i></i></div><h2><i>›</i><span>Plugins: Desktop part</span></h2></div><div class="navGroups"><div class="navGroup navGroupActive"><h3>Using Flipper</h3><ul><li class="navListItem"><a class="navItem" href="/docs/getting-started.html">Getting Started</a></li><li class="navListItem"><a class="navItem" href="/docs/understand.html">Understanding Flipper</a></li><li class="navListItem"><a class="navItem" href="/docs/stetho.html">Stetho Guidance</a></li><li class="navListItem"><a class="navItem" href="/docs/troubleshooting.html">Troubleshooting Issues</a></li></ul></div><div class="navGroup navGroupActive"><h3>Built-in Plugins</h3><ul><li class="navListItem"><a class="navItem" href="/docs/logs-plugin.html">Logs</a></li><li class="navListItem"><a class="navItem" href="/docs/layout-plugin.html">Layout Inspector</a></li><li class="navListItem"><a class="navItem" href="/docs/network-plugin.html">Network</a></li><li class="navListItem"><a class="navItem" href="/docs/sandbox-plugin.html">Sandbox</a></li><li class="navListItem"><a class="navItem" href="/docs/shared-preferences-plugin.html">Shared Preferences</a></li><li class="navListItem"><a class="navItem" href="/docs/leak-canary-plugin.html">LeakCanary</a></li><li class="navListItem"><a class="navItem" href="/docs/crash-reporter-plugin.html">Crash Reporter Plugin</a></li></ul></div><div class="navGroup navGroupActive"><h3>Plugins: Desktop part</h3><ul><li class="navListItem"><a class="navItem" href="/docs/js-setup.html">JavaScript Setup</a></li><li class="navListItem"><a class="navItem" href="/docs/writing-a-plugin.html">Writing a plugin</a></li><li class="navListItem"><a class="navItem" href="/docs/create-table-plugin.html">Create Table Plugin</a></li><li class="navListItem navListItemActive"><a class="navItem navItemActive" href="/docs/communicating.html">Device Communication</a></li><li class="navListItem"><a class="navItem" href="/docs/ui-components.html">UI Components</a></li><li class="navListItem"><a class="navItem" href="/docs/styling-components.html">Styling Components</a></li></ul></div><div class="navGroup navGroupActive"><h3>Plugins: Mobile part</h3><ul><li class="navListItem"><a class="navItem" href="/docs/create-plugin.html">Mobile Setup</a></li><li class="navListItem"><a class="navItem" href="/docs/send-data.html">Send Data</a></li><li class="navListItem"><a class="navItem" href="/docs/error-handling.html">Error Handling</a></li><li class="navListItem"><a class="navItem" href="/docs/testing.html">Testing</a></li></ul></div><div class="navGroup navGroupActive"><h3>Flipper Internals</h3><ul><li class="navListItem"><a class="navItem" href="/docs/establishing-a-connection.html">Establishing a connection</a></li></ul></div></div></section></div><script>
          var toggler = document.getElementById('navToggler');
          var nav = document.getElementById('docsNav');
          toggler.onclick = function() {
            nav.classList.toggle('docsSliderActive');
          };
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1>Device Communication</h1></header><article><div><span><p>To start communicating with a client your plugin must implement the init function. Once this function has been called the active client can also be accessed via <code>this.client</code>. This <code>id</code> of the plugin in JavaScript must match the native plugin <code>id</code> to allow for them to communicate.</p>
<pre><code class="hljs css javascript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">FlipperPlugin</span> </span>{
  <span class="hljs-keyword">static</span> title = <span class="hljs-string">"MyPlugin"</span>;
  <span class="hljs-keyword">static</span> id = <span class="hljs-string">'MyPlugin'</span>;

  init() {
    <span class="hljs-comment">// Setup subscriptions etc using this.client</span>
  }
}
</code></pre>
<p>There are three main ways your desktop plugin can communicate with connected devices.</p>
<h2><a class="anchor" aria-hidden="true" id="remote-method-calls"></a><a href="#remote-method-calls" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Remote method calls</h2>
<p>With remote method calls your plugin can call a method on the attached client. This is useful for querying information from the client that your plugin wants to display. The first parameter is the name of the client API and the second is the specific method on that API. Optionally a JSON object can be passed as an argument to the client.</p>
<pre><code class="hljs css javascript"><span class="hljs-keyword">this</span>.client.call(<span class="hljs-string">'methodName'</span>, DATA).then(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> {
  <span class="hljs-comment">// res contains client response</span>
});
</code></pre>
<p>This function return as promise so that you can await a potential response from the client. If you are calling a method on the client but don't expect a response then you should instead opt for using the <code>send()</code> function.</p>
<pre><code class="hljs css javascript"><span class="hljs-keyword">this</span>.client.send(<span class="hljs-string">'methodName'</span>, DATA);
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="subscriptions"></a><a href="#subscriptions" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Subscriptions</h2>
<p>A client is not only able to respond to method calls but also push data directly to the Flipper desktop app. With the subscribe API your plugin can subscribe to there pushes from the client. Pass the name of the method and the API it is part of as well as a callback function to start a subscription. Any time the client sends a push matching this method the callback will be called with any attached data as a javascript object.</p>
<pre><code class="hljs css javascript"><span class="hljs-keyword">this</span>.client.subscribe(<span class="hljs-string">'methodName'</span>, data =&gt; {
  <span class="hljs-comment">// data contains any payload sent by the client</span>
});
</code></pre>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="create-table-plugin.html">← Create Table Plugin</a><a class="docs-next button" href="ui-components.html">UI Components →</a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#remote-method-calls">Remote method calls</a></li><li><a href="#subscriptions">Subscriptions</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/mascot.png" alt="Flipper mascot" title="I&#x27;m a dolphin not a whale!" width="66" height="58"/></a><div><h5>Docs</h5><a href="/docs/getting-started.html">Getting Started</a><a href="/docs/understand.html">Understanding Flipper</a><a href="/docs/js-setup.html">Creating Plugins</a></div><div><h5>Plugins</h5><a href="/docs/logs-plugin.html">Log Viewer</a><a href="/docs/layout-plugin.html">Layout Inspector</a><a href="/docs/network-plugin.html">Network Inspector</a></div><div><h5>More</h5><a href="https://twitter.com/flipper_fb">Twitter</a><a href="https://github.com/facebook/flipper">GitHub</a><a class="github-button" href="https://github.com/facebook/flipper" data-icon="octicon-star" data-count-href="/facebook/flipper/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a></div></section><a href="https://code.facebook.com/projects/" target="_blank" class="fbOpenSource"><img src="/img/oss_logo.png" alt="Facebook Open Source" width="170" height="45"/></a><section class="copyright">Copyright © 2018 Facebook</section></footer></div></body></html>