(window.webpackJsonp=window.webpackJsonp||[]).push([[54],{204:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return r})),n.d(t,"metadata",(function(){return a})),n.d(t,"rightToc",(function(){return l})),n.d(t,"default",(function(){return u}));var i=n(2),o=n(11),p=(n(0),n(219)),r={id:"layout-plugin",title:"Layout Inspector Setup",sidebar_label:"Layout Inspector"},a={id:"setup/layout-plugin",title:"Layout Inspector Setup",description:"To use the layout inspector plugin, you need to add the plugin to your Flipper client instance.",source:"@site/../docs/setup/layout-plugin.mdx",permalink:"/docs/setup/layout-plugin",editUrl:"https://github.com/facebook/flipper/blob/master/website/../docs/setup/layout-plugin.mdx",sidebar_label:"Layout Inspector",sidebar:"setup",previous:{title:"Manually set up your React Native iOS App",permalink:"/docs/getting-started/react-native-ios"},next:{title:"Navigation Plugin Setup",permalink:"/docs/setup/navigation-plugin"}},l=[{value:"Android",id:"android",children:[{value:"Standard Android View Only",id:"standard-android-view-only",children:[]},{value:"With Litho Support",id:"with-litho-support",children:[]},{value:"Blocking fullscreen views (Android only)",id:"blocking-fullscreen-views-android-only",children:[]}]},{value:"iOS",id:"ios",children:[{value:"Standard UIView Only",id:"standard-uiview-only",children:[]},{value:"With ComponentKit Support",id:"with-componentkit-support",children:[]}]}],c={rightToc:l};function u(e){var t=e.components,n=Object(o.a)(e,["components"]);return Object(p.b)("wrapper",Object(i.a)({},c,n,{components:t,mdxType:"MDXLayout"}),Object(p.b)("p",null,"To use the layout inspector plugin, you need to add the plugin to your Flipper client instance."),Object(p.b)("h2",{id:"android"},"Android"),Object(p.b)("h3",{id:"standard-android-view-only"},"Standard Android View Only"),Object(p.b)("pre",null,Object(p.b)("code",Object(i.a)({parentName:"pre"},{className:"language-java"}),"import com.facebook.flipper.plugins.inspector.DescriptorMapping;\nimport com.facebook.flipper.plugins.inspector.InspectorFlipperPlugin;\n\nfinal DescriptorMapping descriptorMapping = DescriptorMapping.withDefaults();\nclient.addPlugin(new InspectorFlipperPlugin(mApplicationContext, descriptorMapping));\n")),Object(p.b)("h3",{id:"with-litho-support"},"With Litho Support"),Object(p.b)("p",null,"Litho support is provided via an optional plugin."),Object(p.b)("p",null,"You also need to compile in the ",Object(p.b)("inlineCode",{parentName:"p"},"litho-annotations")," package, as Flipper reflects\non them at runtime. So ensure to not just include them as ",Object(p.b)("inlineCode",{parentName:"p"},"compileOnly")," in your\ngradle configuration:"),Object(p.b)("pre",null,Object(p.b)("code",Object(i.a)({parentName:"pre"},{className:"language-groovy"}),"dependencies {\n  debugImplementation 'com.facebook.flipper:flipper-litho-plugin:0.46.0'\n  debugImplementation 'com.facebook.litho:litho-annotations:0.19.0'\n  // ...\n}\n")),Object(p.b)("p",null,"If you want to enable Litho support in the layout inspector, you need to augment\nthe descriptor with Litho-specific settings and add some addition dependencies."),Object(p.b)("pre",null,Object(p.b)("code",Object(i.a)({parentName:"pre"},{className:"language-java"}),"import com.facebook.litho.config.ComponentsConfiguration;\nimport com.facebook.flipper.plugins.inspector.DescriptorMapping;\nimport com.facebook.flipper.plugins.inspector.InspectorFlipperPlugin;\nimport com.facebook.flipper.plugins.litho.LithoFlipperDescriptors;\n\n// Instead of hard-coding this setting, it's a good practice to tie\n// this to a BuildConfig flag, that you only enable for debug builds\n// of your application.\nComponentsConfiguration.isDebugModeEnabled = true;\n\nfinal DescriptorMapping descriptorMapping = DescriptorMapping.withDefaults();\n// This adds Litho capabilities to the layout inspector.\nLithoFlipperDescriptors.add(descriptorMapping);\n\nclient.addPlugin(new InspectorFlipperPlugin(mApplicationContext, descriptorMapping));\n")),Object(p.b)("h3",{id:"blocking-fullscreen-views-android-only"},"Blocking fullscreen views (Android only)"),Object(p.b)("p",null,"The issue is that if you have some view that occupies big part of the screen but draws nothing and its Z-position is higher than your main content, then selecting view/component through Layout Inspector doesn't work as you intended, as it will always hit that transparent view and you need to manually navigate to the view you need which is time-consuming and should not be necessary."),Object(p.b)("p",null,"Add the following tag to your view to skip it from Flipper's view picker. The view will still be shown in the layout hierarchy, but it will not be selected while using the view picker."),Object(p.b)("pre",null,Object(p.b)("code",Object(i.a)({parentName:"pre"},{className:"language-java"}),"view.setTag(R.id.flipper_skip_view_traversal, true);\n")),Object(p.b)("h2",{id:"ios"},"iOS"),Object(p.b)("h3",{id:"standard-uiview-only"},"Standard UIView Only"),Object(p.b)("p",null,"To debug layout using Flipper, add the following pod:"),Object(p.b)("pre",null,Object(p.b)("code",Object(i.a)({parentName:"pre"},{className:"language-ruby"}),"pod 'FlipperKit/FlipperKitLayoutPlugin', '~>' + flipperkit_version\n")),Object(p.b)("p",null,"Once you have added the pod, initialise the plugin and add it to the ",Object(p.b)("inlineCode",{parentName:"p"},"FlipperClient")," as follows."),Object(p.b)("pre",null,Object(p.b)("code",Object(i.a)({parentName:"pre"},{className:"language-objective-c"}),"#import <FlipperKitLayoutPlugin/FlipperKitLayoutPlugin.h>\n\nSKDescriptorMapper *mapper = [[SKDescriptorMapper alloc] initWithDefaults];\n[client addPlugin:[[FlipperKitLayoutPlugin alloc] initWithRootNode:context.application withDescriptorMapper:mapper]];\n")),Object(p.b)("pre",null,Object(p.b)("code",Object(i.a)({parentName:"pre"},{className:"language-swift"}),"import FlipperKit\n\nlet layoutDescriptorMapper = SKDescriptorMapper(defaults: ())\nclient?.add(FlipperKitLayoutPlugin(rootNode: application, with: layoutDescriptorMapper!))\n")),Object(p.b)("h3",{id:"with-componentkit-support"},"With ComponentKit Support"),Object(p.b)("p",null,"If you want to enable ",Object(p.b)("a",Object(i.a)({parentName:"p"},{href:"https://github.com/facebook/componentkit"}),"ComponentKit support")," in the layout inspector, you need to add ",Object(p.b)("inlineCode",{parentName:"p"},"FlipperKit/FlipperKitLayoutComponentKitSupport")," to your Podfile."),Object(p.b)("pre",null,Object(p.b)("code",Object(i.a)({parentName:"pre"},{className:"language-ruby"}),"pod 'FlipperKit/FlipperKitLayoutComponentKitSupport', '~>' + flipperkit_version\n")),Object(p.b)("p",null,"Once you have added the pod you will then need to augment the descriptor with Componentkit-specific settings as shown below."),Object(p.b)("pre",null,Object(p.b)("code",Object(i.a)({parentName:"pre"},{className:"language-objective-c"}),"#import <FlipperKitLayoutPlugin/FlipperKitLayoutPlugin.h>\n#import <FlipperKitLayoutComponentKitSupport/FlipperKitLayoutComponentKitSupport.h>\n\nSKDescriptorMapper *layoutDescriptorMapper = [[SKDescriptorMapper alloc] initWithDefaults];\n[FlipperKitLayoutComponentKitSupport setUpWithDescriptorMapper: layoutDescriptorMapper];\n[client addPlugin: [[FlipperKitLayoutPlugin alloc] initWithRootNode: application\n                                           withDescriptorMapper: layoutDescriptorMapper]];\n")),Object(p.b)("pre",null,Object(p.b)("code",Object(i.a)({parentName:"pre"},{className:"language-swift"}),"import FlipperKit\n\nlet layoutDescriptorMapper = SKDescriptorMapper(defaults: ())\nFlipperKitLayoutComponentKitSupport.setUpWith(layoutDescriptorMapper)\n\nclient?.add(FlipperKitLayoutPlugin(rootNode: application, with: layoutDescriptorMapper!))\n")))}u.isMDXComponent=!0},219:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return g}));var i=n(0),o=n.n(i);function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,i,o=function(e,t){if(null==e)return{};var n,i,o={},p=Object.keys(e);for(i=0;i<p.length;i++)n=p[i],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(e);for(i=0;i<p.length;i++)n=p[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var c=o.a.createContext({}),u=function(e){var t=o.a.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):a({},t,{},e)),n},s=function(e){var t=u(e.components);return o.a.createElement(c.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return o.a.createElement(o.a.Fragment,{},t)}},b=Object(i.forwardRef)((function(e,t){var n=e.components,i=e.mdxType,p=e.originalType,r=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),s=u(n),b=i,g=s["".concat(r,".").concat(b)]||s[b]||d[b]||p;return n?o.a.createElement(g,a({ref:t},c,{components:n})):o.a.createElement(g,a({ref:t},c))}));function g(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var p=n.length,r=new Array(p);r[0]=b;var a={};for(var l in t)hasOwnProperty.call(t,l)&&(a[l]=t[l]);a.originalType=e,a.mdxType="string"==typeof e?e:i,r[1]=a;for(var c=2;c<p;c++)r[c]=n[c];return o.a.createElement.apply(null,r)}return o.a.createElement.apply(null,n)}b.displayName="MDXCreateElement"}}]);